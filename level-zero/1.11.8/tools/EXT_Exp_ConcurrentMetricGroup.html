
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Concurrent Metric Groups Experimental Extension &#8212; Level Zero Specification  documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Level Zero Specification  documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../core/INTRO.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../core/PROG.html">
   Core Programming Guide
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="PROG.html">
   Tools Programming Guide
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../sysman/PROG.html">
   Sysman Programming Guide
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../core/SPIRV.html">
   SPIR-V Programming Guide
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../core/EXT.html">
   Extensions
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../api.html">
   API Documentation
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../core/api.html">
     Core API
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api.html">
     Tools API
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../sysman/api.html">
     Sysman API
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../versions.html">
   Versions
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/tools/EXT_Exp_ConcurrentMetricGroup.rst.txt"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.rst</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#api">
   API
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#concurrent-metric-groups">
     Concurrent Metric Groups
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sample-code">
   Sample Code
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <section id="concurrent-metric-groups-experimental-extension">
<span id="zet-experimental-concurrent-metric-groups"></span><h1>Concurrent Metric Groups Experimental Extension<a class="headerlink" href="#concurrent-metric-groups-experimental-extension" title="Permalink to this headline">¶</a></h1>
<section id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Functions</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="api.html#zetdevicegetconcurrentmetricgroupsexp"><span class="std std-ref">zetDeviceGetConcurrentMetricGroupsExp</span></a></p></li>
</ul>
</div></blockquote>
</li>
</ul>
<section id="concurrent-metric-groups">
<h3>Concurrent Metric Groups<a class="headerlink" href="#concurrent-metric-groups" title="Permalink to this headline">¶</a></h3>
<p>Metric groups enumerated or created cannot be collected or activated concurrently if the metric groups use shared HW resources.
Currently Metric “Domains” are used to determine if a metric group can be collected along with another metric group.
Since Metric “Domains” are at a metric group level, it cannot represent metric level HW dependencies.
This API replaces using “domain” property of metric group to determine independent HW usage and provides sets of metric groups which could be collected concurrently.
<a class="reference internal" href="api.html#zetdevicegetconcurrentmetricgroupsexp"><span class="std std-ref">zetDeviceGetConcurrentMetricGroupsExp</span></a> allows an input list of metric groups to be re-arranged to sequential sets of metric groups which could be collected concurrently.
This API also allows the application to calculate the number of replays or workload executions necessary to collect a set of overlapping metric groups.</p>
</section>
</section>
<section id="sample-code">
<h2>Sample Code<a class="headerlink" href="#sample-code" title="Permalink to this headline">¶</a></h2>
<p>The following pseudo-code shows how an application could query for sets of concurrent metric groups within a list of metric groups</p>
<pre class="literal-block">// Input metric group count;
uint32_t inputMetricGroupCount;

// Input and output list of metric groups
zet_metric_group_handle_t * phMetricGroups;

// Output concurrent group information
uint32_t concurrentGroupCount = 0;

// Get number of concurrent groups / number of replays necessary
<a class="reference internal" href="api.html#zetdevicegetconcurrentmetricgroupsexp"><span class="std std-ref">zetDeviceGetConcurrentMetricGroupsExp</span></a>(hDevice, inputMetricGroupCount, phMetricGroups, &amp;concurrentGroupCount, nullptr);

// Allocate for count per concurrent group
uint32_t * pCountPerConcurrentGroup = malloc(sizeof(uint32_t) * concurrentGroupCount);

// Retrieve the rearranged metric groups along with the count per concurrent group
<a class="reference internal" href="api.html#zetdevicegetconcurrentmetricgroupsexp"><span class="std std-ref">zetDeviceGetConcurrentMetricGroupsExp</span></a>(hDevice, inputMetricGroupCount, phMetricGroups, &amp;concurrentGroupCount, pCountPerConcurrentGroup);

// Activate the concurrent groups and Replay the workload
for(uint32_t concurrentGroupIndex = 0; concurrentGroupIndex &lt; concurrentGroupCount; concurrentGroupIndex ++){
    <a class="reference internal" href="api.html#zetcontextactivatemetricgroups"><span class="std std-ref">zetContextActivateMetricGroups</span></a>(hContext, hDevice, pCountPerConcurrentGroup[concurrentGroupIndex], phMetricGroups);

    // run workload

    phMetricGroups += pCountPerConcurrentGroup[concurrentGroupIndex];
}</pre>
</section>
</section>


              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Intel<br/>
        
            &copy; Copyright 2024, Intel.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>